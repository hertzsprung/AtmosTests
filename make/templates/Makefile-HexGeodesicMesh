# $1 -- case
# $2 -- .obj file
define HexGeodesicMesh

.INTERMEDIATE: $1.intermediate

$(addprefix $1/,$(meshFiles)): $1.intermediate

$1.intermediate: \
  $1/mesh.obj \
  $1/$(extrudeMeshDict) \
  $(addprefix $1/,$(systemFiles)) \
| $1 \
  $1/constant \
  $1/system
	$(extrudeMesh) -case $1
	sed -i 's/patch/empty/g' $1/$(boundary)
	sed -i -e '/sides/,+6d' $1/$(boundary)
	sed -i '18s/3/2/' $1/$(boundary)
	$(renumberMesh) -case $1 -constant -overwrite

$(eval $(call CopyFile,$2,$1/mesh.obj))
$(eval $(call CopyFile,src/mesh/extrudeGeodesicMeshDict,$1/$(extrudeMeshDict)))
$(eval $(call CopyNamedFiles,$(dummy),$(systemFiles),$1))
$(eval $(call MakeDir,$1/constant))
$(eval $(call MakeDir,$1/system))
$(eval $(call MakeDir,$1))

endef

