# $1 -- case directory
# $2 -- mesh case
# $3 -- theta profile (from the gravityWaves test)
# $4 -- timestep
define ThermalAdvection

all:: $1/18000/T

$(eval $(call FieldDiff,$1,18000,T,$1-analyticTracer/0/T_analytic))

$(eval $(call AnalyticThetaField,$1-analyticTracer,$2,src/thermalAdvection/velocityField-250m,src/gravityWaves/constant/environmentalProperties,src/physical/constant/thermophysicalProperties))

$(eval $(call VelocityField,$1-velocity,$2,src/thermalAdvection/velocityField-250m))

$(eval $(call AdvectTracer,$1,$2,$3,$1-velocity/0/phi,18000,$4,3600,src/advection/system/cubicUpwindCPCFit src/advection/system/commonFvSchemes))

endef

# $1 -- case directory
# $2 -- mesh case
# $3 -- velocityFieldDict
# $4 -- environmentalProperties
# $5 -- thermophysicalProperties
define AnalyticThetaField

$1/0/T_analytic: \
  $(setAdvectedTheta)
	$(setAdvectedTheta) -case $1

endef
